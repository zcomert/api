@{
    var user = ViewBag.User as Entities.Models.AppUser;
    var userRoles = ViewBag.UserRoles as IList<string>;
    var allRoles = ViewBag.AllRoles as IList<string>;
}

<h2>@user.UserName için Rolleri Güncelle</h2>

<div class="row">
    <div class="col-md-6">
        <form method="post" asp-action="Update">
            <input type="hidden" name="userId" value="@user.Id" />

            <h4>Roller</h4>
            @foreach (var role in allRoles)
            {
                <div class="form-check">
                    <input class="form-check-input" 
                           type="checkbox" 
                           name="roles" 
                           value="@role" 
                           @(userRoles.Contains(role) ? "checked" : "") />
                    <label class="form-check-label">
                        @role
                    </label>
                </div>
            }

            <div class="form-group my-3">
                <button type="submit" class="btn btn-primary">Rolleri Güncelle</button>
                <a asp-action="Index" class="btn btn-secondary">Vazgeç</a>
            </div>
        </form>
    </div>
</div>